<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RouteGraph-RAG · Flight Recommender</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app-root" class="app-root">
      <!-- Top bar -->
      <header class="app-header">
        <div class="header-main">
          <h1 class="app-title">RouteGraph-RAG</h1>
          <p class="app-tagline">
            Constraint-aware flight recommendations with route-graph and review signals.
          </p>
        </div>
        <!-- header pill removed per professor feedback -->
      </header>

      <!-- Loading / error indicators -->
      <div id="loading-indicator" class="status-message" style="display: none;">
        Loading flight data, route graph, and reviews…
      </div>
      <div id="error-indicator" class="status-message status-error" style="display: none;">
        Something went wrong while loading data. Please refresh the page.
      </div>

      <main class="app-main">
        <!-- Left: search & constraints -->
        <aside class="controls-pane">
          <h2 class="pane-title">Search &amp; Constraints</h2>
          <form class="constraints-form">
            <!-- Origin -->
            <div class="form-field">
              <label for="origin-select">Origin</label>
              <select id="origin-select"></select>
            </div>

            <!-- Destination -->
            <div class="form-field">
              <label for="destination-select">Destination</label>
              <select id="destination-select"></select>
            </div>

            <!-- Max stops -->
            <div class="form-field">
              <label for="max-stops-select">Max stops</label>
              <select id="max-stops-select">
                <option>Any</option>
                <option>Non-stop only</option>
                <option>Up to 1 stop</option>
                <option>Up to 2 stops</option>
              </select>
            </div>

            <!-- Alliance preference -->
            <div class="form-field">
              <label for="alliance-select">Preferred alliance</label>
              <select id="alliance-select">
                <option>No preference</option>
                <option>SkyTeam</option>
                <option>Star Alliance</option>
                <option>Oneworld</option>
                <option>None</option>
              </select>
            </div>

            <!-- Button -->
            <div class="form-actions">
              <button id="recommend-button" type="button">
                Recommend flights
              </button>
            </div>
          </form>
        </aside>

        <!-- Right: sort / filters + recommendations -->
        <section class="results-pane">
          <!-- Sort & Filters card -->
          <div class="sort-filter-card">
            <div class="sort-filter-tabs">
              <button
                type="button"
                id="sf-tab-sort"
                class="sort-filter-tab sort-filter-tab-active"
              >
                Sort by
              </button>
              <button
                type="button"
                id="sf-tab-filters"
                class="sort-filter-tab"
              >
                Filters
              </button>
            </div>

            <!-- Sort panel -->
            <div id="sf-panel-sort" class="sort-filter-panel">
              <div class="sort-row">
                <label>
                  <input
                    type="radio"
                    name="sf-sort-option"
                    id="sf-sort-model"
                    value="model"
                    checked
                  />
                  Recommended (model ranking)
                </label>
                <label>
                  <input
                    type="radio"
                    name="sf-sort-option"
                    id="sf-sort-price"
                    value="price"
                  />
                  Cheapest first
                </label>
                <label>
                  <input
                    type="radio"
                    name="sf-sort-option"
                    id="sf-sort-duration"
                    value="duration"
                  />
                  Fastest first
                </label>
              </div>
            </div>

            <!-- Filters panel -->
            <div
              id="sf-panel-filters"
              class="sort-filter-panel"
              style="display: none;"
            >
              <!-- Price range -->
              <div class="filter-row">
                <label for="price-range">Max price (₽)</label>
                <input
                  type="range"
                  id="price-range"
                  min="0"
                  max="80000"
                  step="1000"
                />
                <div class="filter-range-label">
                  <span id="price-range-label">No max limit</span>
                </div>
              </div>

              <!-- Departure time buckets -->
              <div class="filter-row">
                <label>Departure time</label>
                <div class="time-bucket-row">
                  <button
                    type="button"
                    class="time-chip"
                    id="dep-bucket-early"
                  >
                    Before 6AM
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="dep-bucket-morning"
                  >
                    6AM–12 Noon
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="dep-bucket-afternoon"
                  >
                    12 Noon–6PM
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="dep-bucket-evening"
                  >
                    After 6PM
                  </button>
                </div>
              </div>

              <!-- Arrival time buckets -->
              <div class="filter-row">
                <label>Arrival time</label>
                <div class="time-bucket-row">
                  <button
                    type="button"
                    class="time-chip"
                    id="arr-bucket-early"
                  >
                    Before 6AM
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="arr-bucket-morning"
                  >
                    6AM–12 Noon
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="arr-bucket-afternoon"
                  >
                    12 Noon–6PM
                  </button>
                  <button
                    type="button"
                    class="time-chip"
                    id="arr-bucket-evening"
                  >
                    After 6PM
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Banner for constraint fallback -->
          <div id="constraints-banner" class="constraints-banner"></div>

          <div class="results-grid">
            <!-- Standard column -->
            <section class="results-column">
              <h2 class="results-title">
                Standard recommendations
              </h2>
              <p class="results-subtitle">
                Ordered using core features like price, duration, and stops.
              </p>
              <div id="baseline-results" class="results-list"></div>
            </section>

            <!-- Smart column -->
            <section class="results-column">
              <h2 class="results-title">
                Smart recommendations
              </h2>
              <p class="results-subtitle">
                Uses route popularity, connectivity, reviews, and your alliance preference.
              </p>
              <div id="hybrid-results" class="results-list"></div>
            </section>
          </div>
        </section>
      </main>
    </div>

    <!-- App entry -->
    <script type="module" src="./app.js"></script>
  </body>
</html>
